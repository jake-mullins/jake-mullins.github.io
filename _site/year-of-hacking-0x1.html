<!DOCTYPE html>
<html lang="en" class="html" data-theme="dark"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>
    
      Week 1 - Intro & Simple Docker Orchestration
    
  </title>

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Week 1 - Intro &amp; Simple Docker Orchestration" />
<meta name="author" content="Jake Mullins" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I’m setting out to write a short blog post every week about whatever Cybersecurity or information security related topic I’m working on. There will likely be repeats, and cop-outs where I can’t post source code because it’s linked to a school assignment, and more than a few weeks that aren’t related to security. Hopefully they will be published each Monday for the next year." />
<meta property="og:description" content="I’m setting out to write a short blog post every week about whatever Cybersecurity or information security related topic I’m working on. There will likely be repeats, and cop-outs where I can’t post source code because it’s linked to a school assignment, and more than a few weeks that aren’t related to security. Hopefully they will be published each Monday for the next year." />
<link rel="canonical" href="http://localhost:4000/year-of-hacking-0x1" />
<meta property="og:url" content="http://localhost:4000/year-of-hacking-0x1" />
<meta property="og:site_name" content="Jake Mullins" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-04-04T00:00:00-06:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Week 1 - Intro &amp; Simple Docker Orchestration" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Jake Mullins"},"dateModified":"2024-04-04T00:00:00-06:00","datePublished":"2024-04-04T00:00:00-06:00","description":"I’m setting out to write a short blog post every week about whatever Cybersecurity or information security related topic I’m working on. There will likely be repeats, and cop-outs where I can’t post source code because it’s linked to a school assignment, and more than a few weeks that aren’t related to security. Hopefully they will be published each Monday for the next year.","headline":"Week 1 - Intro &amp; Simple Docker Orchestration","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/year-of-hacking-0x1"},"url":"http://localhost:4000/year-of-hacking-0x1"}</script>
<!-- End Jekyll SEO tag -->

  <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Jake Mullins" />

  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon/favicon-16x16.png">
  <link rel="manifest" href="/assets/images/favicon/site.webmanifest">
  <link rel="mask-icon" href="/assets/images/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="/assets/images/favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#00aba9">
  <meta name="msapplication-config" content="/assets/images/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">
  <!-- Favicon -->

  <link rel="stylesheet" href="/assets/css/main.css" />
  
    <script type="text/javascript">
  window.addEventListener('load', themeChange);
  const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;
  if (currentTheme)
    document.documentElement.setAttribute('data-theme', currentTheme);

  function themeChange() {
    let button = document.querySelector('.theme-toggle');

    button.addEventListener('click', function (e) {
      let currentTheme = document.documentElement.getAttribute('data-theme');
      if (currentTheme === 'dark') {
        transition();
        document.documentElement.setAttribute('data-theme', 'light');
        localStorage.setItem('theme', 'light');
      } else {
        transition();
        document.documentElement.setAttribute('data-theme', 'dark');
        localStorage.setItem('theme', 'dark');
      }
    });

    let transition = () => {
      document.documentElement.classList.add('transition');
      window.setTimeout(() => {
        document.documentElement.classList.remove('transition');
      }, 1000);
    }
  }
</script>


  
</head>
<body>
    <main class="page-content" aria-label="Content">
      <div class="w">
        <a href="/">home...</a>
<h1 class="post-title">Week 1 - Intro & Simple Docker Orchestration</h1>
<p class="post-date text-bold">
  
  
    <span class="text-upcase">April 2024</span>
  


  
  
  (829 Words, 
  5 Minutes)
  

</p>


  <div class="">
    
    <span class="tag">year-of-hacking</span>
    
    <span class="tag">development</span>
    
  </div>


<p>I’m setting out to write a short blog post every week about whatever Cybersecurity or information security related topic I’m working on. There will likely be repeats, and cop-outs where I can’t post source code because it’s linked to a school assignment, and more than a few weeks that aren’t related to security. Hopefully they will be published each Monday for the next year.</p>

<p>I’m hoping by the end of this project, I will have increased my technical expertise in a variety of different fields, and get a decently broad survey of the cybersecurity landscape, as well as better my writing skills and keep a public record of some of the technical feats I’ve accomplished.</p>
<h1 id="docker">Docker</h1>
<p>Docker is an incredibly widespread and useful technology, packaged with half a dozen enterprise software platforms. It is old, so to my understanding it’s being phased out in favor of newer solutions like Podman which don’t require root privileges out of the box. Regardless, it still is an immensely useful tool for people working in information security as it allows professionals to work with complicated software setups that don’t necessitate a full VM, but could benefit from a custom environment. I’ve dabbled in docker before for school assignments, using the Kali Linux image before I set up the Kali Linux WSL instance, and using the afl-fuzz image during previous experiments with fuzzing.</p>

<p>In order to solidify the concept of docker images and container orchestration, I designed a simple project that could benefit from having multiple docker containers. I think it would be interesting to see what gifs people choose to correlate with certain songs. For example the Polish song <a href="https://open.spotify.com/track/40rPqOehcndc4xODWUCfYo?si=efabf09152f9462a">Gdzie Jest Bialy Wegorz</a> by Cypis has been associated with this gif of a dancing Holstein cow like <a href="https://www.youtube.com/watch?v=Vy8moBcKVIM&amp;ab_channel=skeet">this video with 1.5 Million views</a>, which is peculiar given the vulgar lyrics about drug addiction and withdrawal.
<img src="https://imgs.search.brave.com/vyhNnOzvLjBSo2fhUGwEU5QacyS_v0cyAWQXgwH9k5g/rs:fit:860:0:0/g:ce/aHR0cHM6Ly9tZWRp/YTEudGVub3IuY29t/L20vX2dmcWZYQVAw/OElBQUFBQy9wb2xp/c2gtY293LWNvdy5n/aWY.gif" alt="Polish Cow Meme" />
I’m creating a simple website that accesses a user’s Spotify account and asks them to submit a tenor link. The idea is to have a sizeable user-generated database of what gifs people most associate with a particular song for use by later projects. This is ultimately pretty attainable, and could serve as a teaching tool for my day job as a web security teacher.</p>
<h2 id="docker-compose-file">Docker compose file</h2>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.9'</span>
<span class="na">services</span><span class="pi">:</span>
<span class="s">  db</span><span class="pi">:</span>
<span class="s">    image</span><span class="pi">:</span> <span class="s">postgres:16</span>
<span class="s">    environment</span><span class="pi">:</span>
<span class="s">      POSTGRES_ROOT_PASSWORD</span><span class="pi">:</span> <span class="s">${POSTGRES_ROOT_PASSWORD}</span>
<span class="s">      POSTGRES_DB</span><span class="pi">:</span> <span class="s">${POSTGRES_DB}</span>
<span class="s">      POSTGRES_USER</span><span class="pi">:</span> <span class="s">${POSTGRES_USER}</span>
<span class="s">      POSTGRES_PASSWORD</span><span class="pi">:</span> <span class="s">${POSTGRES_PASSWORD}</span>
<span class="s">    ports</span><span class="pi">:</span>
<span class="s">      - "5432:5432"</span>
<span class="s">    volumes</span><span class="pi">:</span>
<span class="s">      - db_data:/var/lib/mysql</span>
<span class="s">      - ./queries/init/init.sql:/docker-entrypoint-initdb.d/init.sql</span>
<span class="s">  backend</span><span class="pi">:</span>
<span class="s">    image</span><span class="pi">:</span> <span class="s2">"</span><span class="s">node:20"</span>
<span class="s">    user</span><span class="pi">:</span> <span class="s2">"</span><span class="s">node"</span>
<span class="s">    working_dir</span><span class="pi">:</span> <span class="s">/app</span>
<span class="s">    depends_on</span><span class="pi">:</span>
<span class="s">      - db</span>
<span class="s">    environment</span><span class="pi">:</span>
<span class="s">      NODE_ENV</span><span class="pi">:</span> <span class="s">dev</span>
<span class="s">      POSTGRES_ROOT_PASSWORD</span><span class="pi">:</span> <span class="s">${POSTGRES_ROOT_PASSWORD}</span>
<span class="s">      POSTGRES_DB</span><span class="pi">:</span> <span class="s">${POSTGRES_DB}</span>
<span class="s">      POSTGRES_USER</span><span class="pi">:</span> <span class="s">${POSTGRES_USER}</span>
<span class="s">      POSTGRES_PORT</span><span class="pi">:</span> <span class="s">${POSTGRES_PORT}</span>
<span class="s">      POSTGRES_PASSWORD</span><span class="pi">:</span> <span class="s">${POSTGRES_PASSWORD}</span>
<span class="s">      POSTGRES_ALIAS</span><span class="pi">:</span> <span class="s">${POSTGRES_ALIAS}</span>
<span class="s">    volumes</span><span class="pi">:</span>
<span class="s">      - ./src/:/app/</span>
<span class="s">    ports</span><span class="pi">:</span>
<span class="s">      - "3000:3000"</span>
<span class="s">    links</span><span class="pi">:</span>
<span class="s">      - "db:database"</span>
<span class="s">    command</span><span class="pi">:</span> <span class="s2">"</span><span class="s">npm</span><span class="nv"> </span><span class="s">start"</span>
<span class="na">volumes</span><span class="pi">:</span>
<span class="s">  db_data</span><span class="pi">:</span>
</code></pre></div></div>
<h3 id="interesting-features-with-security-implications">Interesting features with security implications</h3>
<p>It is possible to pass environment variables to docker images using the <code class="language-plaintext highlighter-rouge">environment</code> tag in a docker compose file. It would be pretty easy for a lazy developer to hardcode in sensitive information into these values, exposing credentials should source code for a deployment be leaked. The more secure and easier to manage method is to create a separate <code class="language-plaintext highlighter-rouge">.env</code> file defining all the environment variables with the sensitive data. Luckily, the developers of docker recognize this as the best practice, so <a href="https://docs.docker.com/compose/environment-variables/set-environment-variables/">official documentation</a> list this as the primary method. This is what my <code class="language-plaintext highlighter-rouge">.env</code> file looks like:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">POSTGRES_ROOT_PASSWORD</span><span class="o">=</span>xxxxx
<span class="nv">POSTGRES_DB</span><span class="o">=</span>spotify_gif
<span class="nv">POSTGRES_USER</span><span class="o">=</span>spotifygifuser
<span class="nv">POSTGRES_PASSWORD</span><span class="o">=</span>xxxxx

<span class="nv">POSTGRES_PORT</span><span class="o">=</span>5432
<span class="nv">POSTGRES_ALIAS</span><span class="o">=</span>database
</code></pre></div></div>
<p>This doesn’t provide a perfectly secure way of storing credentials, but instead changes the necessary attack chain from compromising source code for a particular instance of an application, instead necessitating compromising an application while it’s running in production, or accessing whatever escrow the deployment-specific <code class="language-plaintext highlighter-rouge">.env</code> is stored in.</p>

<p>It is possible to map directories from the host of an image to the file system of the guest image under the <code class="language-plaintext highlighter-rouge">volumes</code> tag. In my example, I’ve mapped the contents of <code class="language-plaintext highlighter-rouge">./src/</code> from the project directory to <code class="language-plaintext highlighter-rouge">/app/</code> on the image. Developers should take care to make sure no non-essential data is being mounted to the image, so that if an attacker were to somehow gain command line access to an image or execute a path traversal attack, sensitive data wouldn’t be leaked. In my setup, I don’t use all the values of the <code class="language-plaintext highlighter-rouge">.env</code>, instead I pass the necessary environment variables through the docker compose file. This means unused environment variables are not exposed to images, protecting them if an image gets compromised.</p>

<p>I’m curious to know if a simple docker compose file can be configured to provide load balancing in the event of a backend crashing, or if that functionality can only come with a container orchestration platform like Red Hat’s OpenShift.</p>
<h3 id="new-music-i-listened-to-this-week">New music I listened to this week</h3>
<p><a href="https://open.spotify.com/track/4feXcsElKIVsGwkbnTHAfV?si=7bee50b3b1ba48b8">Somethin’ Stupid</a> by Frank and Nancy Sinatra
<a href="https://open.spotify.com/track/6j5LtifAnuTjTYvml61yFZ?si=86c27fd0a8764d3b">Un Millón de Primaveras</a> by Vicente Fernandez</p>


        
          <button title="Toggle Theme" class="theme-toggle">
  <svg viewBox="0 0 32 32" width="24" height="24" fill="currentcolor">
    <circle cx="16" cy="16" r="14" fill="none" stroke="currentcolor" stroke-width="4"></circle>
    <path d="
             M 16 0
             A 16 16 0 0 0 16 32
             z">
    </path>
  </svg>
</button>

        
        <div class="credits">&copy;&nbsp;2024&nbsp;Jake Mullins
          &nbsp;
          •
          &nbsp;Theme&nbsp; <a href="https://github.com/abhinavs/moonwalk" target="_blank" rel="noreferrer">Moonwalk</a>
        </div>
      </div>
    </main></body>
</html>
